# Отчет по проделанной работе команды дизайна и разработки

## Основные изменения и достижения

### Разработка системы промокодов

#### Бэкенд:
- **Структура базы данных**: 
  - Создана новая таблица `promocodes` с полями для кода, процента скидки, статуса активности, срока действия, максимального количества использований, счетчика использований и описания.
  - Добавлена связь между промокодами и заказами: поле `promocode_id` в таблице `orders`.
  - Реализована связь между пользователями и активными промокодами: поле `active_promocode_id` в таблице `User`.

- **API для промокодов**:
  - Создан полноценный модуль `promocode` с контроллером, сервисом и DTO.
  - Реализованы эндпоинты для создания, получения, удаления и валидации промокодов.
  - Добавлена бизнес-логика проверки валидности промокода (активность, срок действия, лимит использований).
  - Разработана функция для привязки активного промокода к пользователю.

- **Интеграция в систему заказов**:
  - Доработан сервис заказов для учета промокодов при расчете итоговой суммы.
  - Реализовано автоматическое увеличение счетчика использований промокода при оформлении заказа.

#### Фронтенд:
- **Интерфейс для работы с промокодами**:
  - Создан компонент `PromoCodeInput` для ввода и применения промокода.
  - Разработан сервис `PromocodeService` для взаимодействия с API промокодов.
  - Реализовано отображение примененного промокода и полученной скидки в корзине.

- **Интеграция с Redux-store**:
  - Добавлены действия для применения и удаления промокода.
  - Реализован расчет скидки на основе примененного промокода.
  - Создан полноценный slice для управления состоянием корзины.

### Улучшение функционала корзины

#### Бэкенд:
- **Расширение сервиса корзины**:
  - Реализовано получение информации о корзине с учетом активного промокода пользователя.
  - Добавлена возможность выбора отдельных товаров в корзине (поле `selected`).
  - Разработаны методы для массового обновления выбора товаров и удаления нескольких товаров.
  - Улучшен расчет итоговой суммы с учетом примененных скидок.

#### Фронтенд:
- **Улучшение интерфейса корзины**:
  - Разработаны компоненты `Cart` и `CartItem` с полным функционалом.
  - Реализован интерфейс для выбора отдельных товаров.
  - Добавлено отображение подытогов, скидок и итоговой суммы.

### Разработка системы оформления заказов

#### Бэкенд:
- **Улучшение сервиса заказов**:
  - Переработана логика создания заказа с учетом только выбранных товаров из корзины.
  - Добавлена обработка промокода и расчет скидки при оформлении заказа.
  - Реализована автоматическая очистка корзины от оформленных товаров.
  - Добавлено сохранение информации о примененном промокоде в заказе.

#### Фронтенд:
- **Страница оформления заказа**:
  - Создан полноценный компонент `Checkout` с формой для ввода данных.
  - Реализовано отображение выбранных товаров, суммы и скидки.
  - Разработана интеграция с API для создания заказа.
  - Добавлена навигация на страницу успешного оформления заказа.

- **Страница успешного оформления заказа**:
  - Создан компонент `OrderSuccessPage` для отображения информации о созданном заказе.
  - Реализована загрузка данных о заказе по его идентификатору.
  - Добавлено отображение статуса, email и суммы заказа.

### Улучшение административной панели и авторизации

- **Система ролей и доступов**:
  - Создан `AdminGuard` для защиты эндпоинтов, доступных только администраторам.
  - Улучшен `RolesGuard` для проверки прав доступа пользователей.
  - Доработана стратегия JWT для эффективной работы с ролями.

- **Административная панель**:
  - Значительное расширение функциональности панели администратора.
  - Добавлен интерфейс для управления промокодами.
  - Улучшено отображение и управление заказами.

### Разработка дополнительных страниц и компонентов

- **Страница "О нас"**:
  - Создан полноценный компонент с информацией о компании, преимуществах и ценностях.
  - Реализована адаптивная верстка для различных устройств.
  - Добавлены визуальные элементы и форматирование.

- **Общие улучшения UI**:
  - Доработан компонент `Button` с различными вариантами стилизации.
  - Улучшена система навигации и маршрутизации.
  - Добавлен перехватчик API для обработки запросов.

### Работа дизайнера

- **Разработка UI/UX для новых страниц**:
  - Создан дизайн страницы "О нас" с акцентом на фирменный стиль и современные тренды.
  - Разработан макет формы оформления заказа с учетом принципов удобства использования.
  - Спроектирован дизайн страницы успешного оформления заказа с визуальным подтверждением и четкой структурой информации.

- **Обновление визуальных компонентов**:
  - Переработан дизайн кнопок и форм для более современного и узнаваемого стиля.
  - Разработаны новые иконки и визуальные элементы для промокодов и корзины.
  - Создана единая система отображения скидок и акционных предложений.

- **Адаптивность и кроссплатформенность**:
  - Разработаны адаптивные макеты для всех новых компонентов.
  - Оптимизированы стили для различных размеров экранов, от мобильных устройств до широкоформатных мониторов.
  - Создана система сеток и компонентов для обеспечения единообразия на разных устройствах.

- **Фирменный стиль**:
  - Улучшена цветовая палитра с добавлением акцентных цветов для промо-элементов.
  - Разработаны новые типографические правила для лучшей читабельности важной информации.
  - Создана система оформления информационных сообщений и уведомлений.

- **Дизайн-система**:
  - Дополнена существующая дизайн-система новыми компонентами.
  - Разработана документация по использованию новых UI-элементов.
  - Создан набор шаблонов для различных типов страниц и модальных окон.

## Технические достижения

1. **Улучшение архитектуры приложения**:
   - Более четкое разделение бизнес-логики и представления.
   - Применение принципов SOLID при разработке новых модулей.
   - Улучшение обработки ошибок и логирования.

2. **Оптимизация работы с базой данных**:
   - Создание эффективных индексов для новых таблиц.
   - Использование транзакций для обеспечения целостности данных.
   - Оптимизация запросов для повышения производительности.

3. **Улучшение пользовательского опыта**:
   - Более интуитивный процесс оформления заказа.
   - Прозрачное отображение скидок и итоговых сумм.
   - Информативные сообщения об ошибках и успешных операциях.

## Детали реализации промокодов

1. **Типы и структура промокодов**:
   - Промокоды имеют уникальный код и процент скидки от 0 до 100%.
   - Могут иметь ограничения по сроку действия (`validUntil`).
   - Поддерживают лимит использований (`maxUses` и `usedCount`).
   - Могут быть активными или неактивными (`isActive`).

2. **Применение скидок**:
   - Скидка рассчитывается как процент от общей суммы заказа.
   - При применении промокода обновляется состояние корзины с учетом скидки.
   - Информация о примененном промокоде сохраняется в заказе.

3. **Валидация промокодов**:
   - Проверяется существование, активность и срок действия промокода.
   - Контролируется лимит использований.
   - При применении промокод привязывается к пользователю.

## Заключение

Команда дизайна и разработки успешно реализовала комплексную систему промокодов, значительно улучшила процесс оформления заказов и расширила функциональность корзины. Также были добавлены новые страницы и компоненты, улучшена система авторизации и разграничения прав доступа.

Особое внимание было уделено пользовательскому опыту, что позволило сделать взаимодействие с приложением более интуитивным и приятным. Реализованные изменения представляют собой значительный шаг вперед в развитии платформы и предоставляют пользователям новые возможности для совершения покупок.
